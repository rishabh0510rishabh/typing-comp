{"level":"info","message":"üöÄ Server running on http://localhost:3000","service":"typing-competition","timestamp":"2025-11-02 21:33:46"}
{"level":"info","message":"Environment: development","service":"typing-competition","timestamp":"2025-11-02 21:33:46"}
{"level":"info","message":"‚úì MongoDB connected successfully","service":"typing-competition","timestamp":"2025-11-02 21:33:51"}
{"level":"info","message":"Found 0 active competitions to recover","service":"typing-competition","timestamp":"2025-11-02 21:33:51"}
{"level":"info","message":"üöÄ Server running on http://localhost:3000","service":"typing-competition","timestamp":"2025-11-02 21:37:30"}
{"level":"info","message":"Environment: development","service":"typing-competition","timestamp":"2025-11-02 21:37:30"}
{"level":"info","message":"‚úì MongoDB connected successfully","service":"typing-competition","timestamp":"2025-11-02 21:37:31"}
{"level":"info","message":"Found 0 active competitions to recover","service":"typing-competition","timestamp":"2025-11-02 21:37:31"}
{"level":"info","message":"üöÄ Server running on http://localhost:3000","service":"typing-competition","timestamp":"2025-11-02 21:39:03"}
{"level":"info","message":"Environment: development","service":"typing-competition","timestamp":"2025-11-02 21:39:03"}
{"level":"info","message":"‚úì MongoDB connected successfully","service":"typing-competition","timestamp":"2025-11-02 21:39:04"}
{"level":"info","message":"Found 0 active competitions to recover","service":"typing-competition","timestamp":"2025-11-02 21:39:04"}
{"level":"info","message":"üöÄ Server running on http://localhost:3000","service":"typing-competition","timestamp":"2025-11-02 21:39:26"}
{"level":"info","message":"Environment: development","service":"typing-competition","timestamp":"2025-11-02 21:39:26"}
{"level":"info","message":"‚úì MongoDB connected successfully","service":"typing-competition","timestamp":"2025-11-02 21:39:26"}
{"level":"info","message":"Found 0 active competitions to recover","service":"typing-competition","timestamp":"2025-11-02 21:39:27"}
{"level":"info","message":"üöÄ Server running on http://localhost:3000","service":"typing-competition","timestamp":"2025-11-02 21:44:19"}
{"level":"info","message":"Environment: development","service":"typing-competition","timestamp":"2025-11-02 21:44:19"}
{"level":"info","message":"‚úì MongoDB connected successfully","service":"typing-competition","timestamp":"2025-11-02 21:44:20"}
{"level":"info","message":"Found 0 active competitions to recover","service":"typing-competition","timestamp":"2025-11-02 21:44:20"}
{"level":"info","message":"Socket connected: 9L0skq-rrLpUrTRQAAAB, recovered: false","service":"typing-competition","timestamp":"2025-11-02 21:53:08"}
{"level":"info","message":"Socket disconnected: 9L0skq-rrLpUrTRQAAAB","service":"typing-competition","timestamp":"2025-11-02 21:53:10"}
{"level":"info","message":"Socket connected: vqkRcigwVRa0UapVAAAE, recovered: false","service":"typing-competition","timestamp":"2025-11-02 21:53:10"}
{"level":"info","message":"Socket disconnected: vqkRcigwVRa0UapVAAAE","service":"typing-competition","timestamp":"2025-11-02 21:53:41"}
{"level":"info","message":"Socket connected: SvLRYmvKcg7ZCkplAAAH, recovered: false","service":"typing-competition","timestamp":"2025-11-02 21:53:41"}
{"level":"info","message":"Socket disconnected: SvLRYmvKcg7ZCkplAAAH","service":"typing-competition","timestamp":"2025-11-02 21:53:43"}
{"level":"info","message":"Socket connected: J9OYVGsl3mIrBPFCAAAK, recovered: false","service":"typing-competition","timestamp":"2025-11-02 21:53:43"}
{"level":"info","message":"Socket disconnected: J9OYVGsl3mIrBPFCAAAK","service":"typing-competition","timestamp":"2025-11-02 21:53:43"}
{"level":"info","message":"Socket connected: g3wyKUw2zDnr1iduAAAN, recovered: false","service":"typing-competition","timestamp":"2025-11-02 21:53:44"}
{"level":"info","message":"Socket disconnected: g3wyKUw2zDnr1iduAAAN","service":"typing-competition","timestamp":"2025-11-02 21:54:33"}
{"level":"info","message":"Socket connected: tsHlgrSkNXAgoRJQAAAQ, recovered: false","service":"typing-competition","timestamp":"2025-11-02 21:59:15"}
{"level":"info","message":"Socket disconnected: tsHlgrSkNXAgoRJQAAAQ","service":"typing-competition","timestamp":"2025-11-02 22:00:09"}
{"level":"info","message":"Socket connected: o6o0zm-BMvXzvDDzAAAT, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:00:09"}
{"level":"info","message":"üöÄ Server running on http://localhost:3000","service":"typing-competition","timestamp":"2025-11-02 22:00:32"}
{"level":"info","message":"Environment: development","service":"typing-competition","timestamp":"2025-11-02 22:00:32"}
{"level":"info","message":"Socket connected: NXwxp2njmaAtDak2AAAB, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:00:32"}
{"level":"info","message":"‚úì MongoDB connected successfully","service":"typing-competition","timestamp":"2025-11-02 22:00:33"}
{"level":"info","message":"Found 0 active competitions to recover","service":"typing-competition","timestamp":"2025-11-02 22:00:33"}
{"level":"info","message":"Socket disconnected: NXwxp2njmaAtDak2AAAB","service":"typing-competition","timestamp":"2025-11-02 22:00:52"}
{"level":"info","message":"üöÄ Server running on http://localhost:3000","service":"typing-competition","timestamp":"2025-11-02 22:01:36"}
{"level":"info","message":"Environment: development","service":"typing-competition","timestamp":"2025-11-02 22:01:36"}
{"level":"info","message":"‚úì MongoDB connected successfully","service":"typing-competition","timestamp":"2025-11-02 22:01:37"}
{"level":"info","message":"Found 0 active competitions to recover","service":"typing-competition","timestamp":"2025-11-02 22:01:37"}
{"level":"info","message":"Socket connected: rK5JL9MrCnkZMjXgAAAB, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:01:41"}
{"level":"info","message":"üöÄ Server running on http://localhost:3000","service":"typing-competition","timestamp":"2025-11-02 22:05:32"}
{"level":"info","message":"Environment: development","service":"typing-competition","timestamp":"2025-11-02 22:05:32"}
{"level":"info","message":"Socket connected: YmBRumDNoYxHNywlAAAB, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:05:32"}
{"level":"info","message":"‚úì MongoDB connected successfully","service":"typing-competition","timestamp":"2025-11-02 22:05:33"}
{"level":"info","message":"Found 0 active competitions to recover","service":"typing-competition","timestamp":"2025-11-02 22:05:33"}
{"level":"info","message":"Socket disconnected: YmBRumDNoYxHNywlAAAB","service":"typing-competition","timestamp":"2025-11-02 22:05:35"}
{"level":"info","message":"Socket connected: 8hpaBfAhm-W5gUWCAAAE, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:05:36"}
{"level":"info","message":"Socket disconnected: 8hpaBfAhm-W5gUWCAAAE","service":"typing-competition","timestamp":"2025-11-02 22:06:17"}
{"level":"info","message":"Socket connected: 8Id2Sq5PYUuQpup6AAAH, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:06:17"}
{"level":"info","message":"üöÄ Server running on http://localhost:3000","service":"typing-competition","timestamp":"2025-11-02 22:06:24"}
{"level":"info","message":"Environment: development","service":"typing-competition","timestamp":"2025-11-02 22:06:24"}
{"level":"info","message":"Socket connected: Gcd_yDmNvdGBTcpGAAAB, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:06:24"}
{"level":"info","message":"‚úì MongoDB connected successfully","service":"typing-competition","timestamp":"2025-11-02 22:06:24"}
{"level":"info","message":"Found 0 active competitions to recover","service":"typing-competition","timestamp":"2025-11-02 22:06:25"}
{"level":"info","message":"Socket disconnected: Gcd_yDmNvdGBTcpGAAAB","service":"typing-competition","timestamp":"2025-11-02 22:06:27"}
{"level":"info","message":"Socket connected: INTAqxuVjOLa67vwAAAE, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:06:28"}
{"level":"info","message":"Socket disconnected: INTAqxuVjOLa67vwAAAE","service":"typing-competition","timestamp":"2025-11-02 22:09:54"}
{"level":"info","message":"Socket connected: L7rQ1meQ8KFcxyP0AAAH, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:09:54"}
{"level":"info","message":"Competition created: TechFest 2025 (RVMLGE)","service":"typing-competition","timestamp":"2025-11-02 22:10:38"}
{"level":"info","message":"Participant joined: __ORGANIZER__ in RVMLGE (total: 1)","service":"typing-competition","timestamp":"2025-11-02 22:10:38"}
{"level":"info","message":"Socket disconnected: L7rQ1meQ8KFcxyP0AAAH","service":"typing-competition","timestamp":"2025-11-02 22:11:00"}
{"level":"info","message":"Socket connected: ZT5s_lS82WIiTaGiAAAK, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:11:00"}
{"level":"info","message":"Socket disconnected: ZT5s_lS82WIiTaGiAAAK","service":"typing-competition","timestamp":"2025-11-02 22:11:04"}
{"level":"info","message":"Socket connected: BkXvOfi6NOFGtzwCAAAN, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:11:04"}
{"level":"info","message":"Participant __ORGANIZER__ removed after timeout","service":"typing-competition","timestamp":"2025-11-02 22:13:00"}
{"level":"info","message":"Socket disconnected: BkXvOfi6NOFGtzwCAAAN","service":"typing-competition","timestamp":"2025-11-02 22:15:26"}
{"level":"info","message":"Socket connected: peQhAupa8k_AoIHMAAAQ, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:15:26"}
{"level":"info","message":"Socket disconnected: peQhAupa8k_AoIHMAAAQ","service":"typing-competition","timestamp":"2025-11-02 22:16:44"}
{"level":"info","message":"Socket connected: 9n29SAqg4Cfnax2XAAAT, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:16:45"}
{"level":"info","message":"üöÄ Server running on http://localhost:3000","service":"typing-competition","timestamp":"2025-11-02 22:18:01"}
{"level":"info","message":"Environment: development","service":"typing-competition","timestamp":"2025-11-02 22:18:01"}
{"level":"info","message":"Socket connected: Xl3ej4O3PDRgNTp8AAAB, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:18:02"}
{"level":"info","message":"‚úì MongoDB connected successfully","service":"typing-competition","timestamp":"2025-11-02 22:18:02"}
{"level":"info","message":"Found 0 active competitions to recover","service":"typing-competition","timestamp":"2025-11-02 22:18:02"}
{"level":"info","message":"Socket disconnected: Xl3ej4O3PDRgNTp8AAAB","service":"typing-competition","timestamp":"2025-11-02 22:18:05"}
{"level":"info","message":"Socket connected: znyJnPV6kMI_uzfdAAAE, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:18:05"}
{"level":"info","message":"Competition created: TechFest 2025 (G35BQG)","service":"typing-competition","timestamp":"2025-11-02 22:18:25"}
{"level":"info","message":"Participant joined: __ORGANIZER__ in G35BQG (total: 1)","service":"typing-competition","timestamp":"2025-11-02 22:18:25"}
{"level":"info","message":"Socket disconnected: znyJnPV6kMI_uzfdAAAE","service":"typing-competition","timestamp":"2025-11-02 22:19:23"}
{"level":"info","message":"Socket connected: 0R2tYpfuQKF5Tx7DAAAH, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:19:23"}
{"level":"info","message":"Participant __ORGANIZER__ removed after timeout","service":"typing-competition","timestamp":"2025-11-02 22:21:23"}
{"level":"info","message":"üöÄ Server running on http://localhost:3000","service":"typing-competition","timestamp":"2025-11-02 22:30:24"}
{"level":"info","message":"Environment: development","service":"typing-competition","timestamp":"2025-11-02 22:30:24"}
{"level":"info","message":"Socket connected: d-sy-Ec_oUqIyvo0AAAB, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:30:24"}
{"level":"info","message":"‚úì MongoDB connected successfully","service":"typing-competition","timestamp":"2025-11-02 22:30:26"}
{"level":"info","message":"Found 0 active competitions to recover","service":"typing-competition","timestamp":"2025-11-02 22:30:26"}
{"level":"info","message":"Socket disconnected: d-sy-Ec_oUqIyvo0AAAB","service":"typing-competition","timestamp":"2025-11-02 22:32:48"}
{"level":"info","message":"Socket connected: p2Nn4VDyiXgIEaaYAAAE, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:32:48"}
{"level":"info","message":"Socket disconnected: p2Nn4VDyiXgIEaaYAAAE","service":"typing-competition","timestamp":"2025-11-02 22:34:36"}
{"level":"info","message":"Socket connected: TIETcOCW0gXy-1u9AAAH, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:34:36"}
{"level":"info","message":"Competition created: TechFest 2025 (G7HPUG)","service":"typing-competition","timestamp":"2025-11-02 22:35:09"}
{"level":"info","message":"Participant joined: __ORGANIZER__ in G7HPUG (total: 1)","service":"typing-competition","timestamp":"2025-11-02 22:35:09"}
{"level":"info","message":"Socket disconnected: TIETcOCW0gXy-1u9AAAH","service":"typing-competition","timestamp":"2025-11-02 22:35:15"}
{"level":"info","message":"Socket connected: 5aN6tPO23yNuNcWNAAAK, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:35:20"}
{"level":"info","message":"Socket disconnected: 5aN6tPO23yNuNcWNAAAK","service":"typing-competition","timestamp":"2025-11-02 22:35:37"}
{"level":"info","message":"Socket connected: 08g6HRMJhwyPmU50AAAN, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:35:37"}
{"level":"info","message":"üöÄ Server running on http://localhost:3000","service":"typing-competition","timestamp":"2025-11-02 22:37:00"}
{"level":"info","message":"Environment: development","service":"typing-competition","timestamp":"2025-11-02 22:37:00"}
{"level":"info","message":"Socket connected: iC7TiP1uxbtkTht8AAAB, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:37:01"}
{"level":"info","message":"‚úì MongoDB connected successfully","service":"typing-competition","timestamp":"2025-11-02 22:37:02"}
{"level":"info","message":"Found 0 active competitions to recover","service":"typing-competition","timestamp":"2025-11-02 22:37:02"}
{"0":{"location":"body","msg":"Text must be 10-5000 characters","path":"rounds[0].text","type":"field","value":"let socket;\nlet competitionId = null;\nlet competitionCode = null;\nlet currentRound = 0;\nlet totalRounds = 0;\nlet isPaused = false;\n\n// DOM Elements - TUMHARE EXACT IDs\nconst createSection = document.getElementById('setupSection');\nconst competitionNameInput = document.getElementById('compName');\nconst roundsContainer = document.getElementById('roundsList');\nconst addRoundBtn = document.getElementById('addRoundBtn');\nconst createCompBtn = document.getElementById('createCompBtn');\n\nconst dashboardSection = document.getElementById('dashboard-section');\nconst competitionCodeDisplay = document.getElementById('codeValue');\nconst participantCountDisplay = document.getElementById('participantCountDisplay');\nconst currentRoundDisplay = document.getElementById('current-round-display');\nconst startRoundBtn = document.getElementById('startRoundBtn');\nconst pauseRoundBtn = document.getElementById('pause-round-btn');\nconst organizerLeaderboard = document.getElementById('organizer-leaderboard-body');\n\nlet roundCount = 1; // Fixed: 0 se 1 kiya\n\n// Socket Connection\nfunction connectSocket() {\n  if (socket && socket.connected) return;\n\n  socket = io({\n    reconnection: true,\n    reconnectionDelay: 1000,\n    reconnectionDelayMax: 5000,\n    reconnectionAttempts: Infinity,\n    timeout: 20000\n  });\n\n  socket.on('connect', () => {\n    console.log('‚úÖ Organizer connected:', socket.id);\n    \n    if (socket.recovered && competitionId) {\n      showNotification('Reconnected!', 'success');\n    }\n  });\n\n  socket.on('disconnect', (reason) => {\n    console.log('‚ùå Disconnected:', reason);\n    showNotification('Connection lost...', 'warning');\n  });\n\n  socket.io.on('reconnect', () => {\n    showNotification('Reconnected!', 'success');\n  });\n\n  setupSocketListeners();\n}\n\nfunction setupSocketListeners() {\n  socket.on('participantJoined', ({ name, totalParticipants }) => {\n    if (participantCountDisplay) {\n      participantCountDisplay.textContent = totalParticipants;\n    }\n    showNotification(`${name} joined (${totalParticipants} total)`, 'info');\n  });\n\n  socket.on('participantLeft', ({ name, totalParticipants }) => {\n    if (participantCountDisplay) {\n      participantCountDisplay.textContent = totalParticipants;\n    }\n    showNotification(`${name} left`, 'info');\n  });\n\n  socket.on('leaderboardUpdate', ({ round, leaderboard }) => {\n    updateOrganizerLeaderboard(leaderboard);\n  });\n\n  socket.on('roundEnded', ({ roundIndex, leaderboard }) => {\n    currentRound = roundIndex + 1;\n    if (currentRoundDisplay) {\n      currentRoundDisplay.textContent = `${currentRound} / ${totalRounds}`;\n    }\n    \n    updateOrganizerLeaderboard(leaderboard);\n    \n    if (currentRound < totalRounds) {\n      startRoundBtn.textContent = 'Start Next Round';\n      startRoundBtn.disabled = false;\n      pauseRoundBtn.disabled = true;\n      pauseRoundBtn.textContent = 'Pause Round';\n      isPaused = false;\n      showNotification(`Round ${roundIndex + 1} complete!`, 'success');\n    } else {\n      startRoundBtn.disabled = true;\n      startRoundBtn.textContent = 'Competition Completed';\n      pauseRoundBtn.disabled = true;\n      showNotification('üéâ Competition completed!', 'success');\n    }\n  });\n\n  socket.on('error', ({ message }) => {\n    showNotification(message, 'error');\n  });\n}\n\n// Initialize first round automatically\nfunction initFirstRound() {\n  const firstRound = document.createElement('div');\n  firstRound.className = 'round-input';\n  firstRound.innerHTML = `\n    <h3>Round 1</h3>\n    <label>Text to Type:</label>\n    <textarea class=\"round-text\" rows=\"3\" placeholder=\"Enter text...\" required></textarea>\n    \n    <label>Duration (seconds):</label>\n    <input type=\"number\" class=\"round-duration\" min=\"10\" max=\"600\" value=\"60\" required>\n    \n    <button class=\"remove-round-btn\" onclick=\"removeRound(this)\">Remove</button>\n  `;\n  if (roundsContainer) {\n    roundsContainer.appendChild(firstRound);\n  }\n}\n\n// Add Round\nif (addRoundBtn) {\n  addRoundBtn.addEventListener('click', () => {\n    if (roundCount >= 10) {\n      showNotification('Max 10 rounds allowed', 'warning');\n      return;\n    }\n\n    roundCount++;\n    const roundDiv = document.createElement('div');\n    roundDiv.className = 'round-input';\n    roundDiv.innerHTML = `\n      <h3>Round ${roundCount}</h3>\n      <label>Text to Type:</label>\n      <textarea class=\"round-text\" rows=\"3\" placeholder=\"Enter text...\" required></textarea>\n      \n      <label>Duration (seconds):</label>\n      <input type=\"number\" class=\"round-duration\" min=\"10\" max=\"600\" value=\"60\" required>\n      \n      <button class=\"remove-round-btn\" onclick=\"removeRound(this)\">Remove</button>\n    `;\n    \n    roundsContainer.appendChild(roundDiv);\n    showNotification(`Round ${roundCount} added`, 'success');\n  });\n}\n\n// Remove Round\nwindow.removeRound = function(button) {\n  const roundDiv = button.closest('.round-input');\n  const allRounds = document.querySelectorAll('.round-input');\n  \n  if (allRounds.length <= 1) {\n    showNotification('Cannot remove last round', 'warning');\n    return;\n  }\n  \n  roundDiv.remove();\n  \n  // Renumber rounds\n  const rounds = document.querySelectorAll('.round-input');\n  rounds.forEach((round, index) => {\n    round.querySelector('h3').textContent = `Round ${index + 1}`;\n  });\n  \n  roundCount = rounds.length;\n  showNotification('Round removed', 'info');\n};\n\n// Create Competition\nif (createCompBtn) {\n  createCompBtn.addEventListener('click', async () => {\n    const name = competitionNameInput.value.trim();\n    \n    if (!name || name.length < 3) {\n      showNotification('Name must be 3+ characters', 'error');\n      competitionNameInput.focus();\n      return;\n    }\n\n    const roundInputs = document.querySelectorAll('.round-input');\n    \n    if (roundInputs.length === 0) {\n      showNotification('Add at least one round', 'error');\n      return;\n    }\n\n    const rounds = [];\n    let isValid = true;\n\n    roundInputs.forEach((roundDiv, index) => {\n      const text = roundDiv.querySelector('.round-text').value.trim();\n      const duration = parseInt(roundDiv.querySelector('.round-duration').value);\n\n      if (!text || text.length < 10) {\n        showNotification(`Round ${index + 1}: Min 10 characters`, 'error');\n        isValid = false;\n        return;\n      }\n\n      if (!duration || duration < 10 || duration > 600) {\n        showNotification(`Round ${index + 1}: Duration 10-600s`, 'error');\n        isValid = false;\n        return;\n      }\n\n      rounds.push({ text, duration });\n    });\n\n    if (!isValid) return;\n\n    createCompBtn.disabled = true;\n    createCompBtn.textContent = 'Creating...';\n\n    try {\n      const response = await fetch('/api/create', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name, rounds })\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Failed to create');\n      }\n\n      if (data.success) {\n        competitionId = data.competitionId;\n        competitionCode = data.code;\n        totalRounds = rounds.length;\n\n        if (!socket || !socket.connected) {\n          connectSocket();\n        }\n        \n        if (socket.connected) {\n          socket.emit('join', { code: data.code, participantName: '__ORGANIZER__' });\n        } else {\n          socket.once('connect', () => {\n            socket.emit('join', { code: data.code, participantName: '__ORGANIZER__' });\n          });\n        }\n\n        if (createSection) createSection.style.display = 'none';\n        if (dashboardSection) dashboardSection.style.display = 'block';\n\n        if (competitionCodeDisplay) competitionCodeDisplay.textContent = data.code;\n        if (currentRoundDisplay) currentRoundDisplay.textContent = `0 / ${totalRounds}`;\n        if (participantCountDisplay) participantCountDisplay.textContent = '0';\n\n        showNotification(`‚úÖ Created! Code: ${data.code}`, 'success');\n        \n        navigator.clipboard.writeText(data.code)\n          .then(() => showNotification('Code copied!', 'success'))\n          .catch(() => {});\n      }\n    } catch (error) {\n      showNotification(error.message, 'error');\n    } finally {\n      createCompBtn.disabled = false;\n      createCompBtn.textContent = 'Create Competition';\n    }\n  });\n}\n\n// Start Round\nif (startRoundBtn) {\n  startRoundBtn.addEventListener('click', () => {\n    if (!competitionId) {\n      showNotification('No competition active', 'error');\n      return;\n    }\n\n    const count = parseInt(participantCountDisplay?.textContent || '0');\n    \n    if (count === 0) {\n      if (!confirm('No participants. Start anyway?')) {\n        return;\n      }\n    }\n\n    startRoundBtn.disabled = true;\n    startRoundBtn.textContent = 'Starting...';\n\n    socket.emit('startRound', { competitionId, roundIndex: currentRound });\n\n    setTimeout(() => {\n      startRoundBtn.textContent = 'Round In Progress...';\n      if (pauseRoundBtn) pauseRoundBtn.disabled = false;\n      showNotification(`Round ${currentRound + 1} started!`, 'success');\n    }, 500);\n  });\n}\n\n// Pause/Resume\nif (pauseRoundBtn) {\n  pauseRoundBtn.addEventListener('click', () => {\n    if (!competitionId) return;\n\n    if (!isPaused) {\n      socket.emit('pauseRound', { competitionId });\n      pauseRoundBtn.textContent = 'Resume Round';\n      isPaused = true;\n      showNotification('‚è∏Ô∏è Paused', 'warning');\n    } else {\n      socket.emit('resumeRound', { competitionId });\n      pauseRoundBtn.textContent = 'Pause Round';\n      isPaused = false;\n      showNotification('‚ñ∂Ô∏è Resumed', 'success');\n    }\n  });\n}\n\n// Update Leaderboard\nfunction updateOrganizerLeaderboard(leaderboard) {\n  if (!organizerLeaderboard) return;\n\n  if (!leaderboard || leaderboard.length === 0) {\n    organizerLeaderboard.innerHTML = '<tr><td colspan=\"4\" style=\"text-align:center;padding:20px;color:var(--color-text-secondary);\">Waiting for participants...</td></tr>';\n    return;\n  }\n\n  organizerLeaderboard.innerHTML = '';\n\n  leaderboard.forEach((entry, index) => {\n    const row = document.createElement('tr');\n    const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : '';\n    const warning = entry.wpm > 200 ? ' <span title=\"Suspicious WPM\">‚ö†Ô∏è</span>' : '';\n    \n    row.innerHTML = `\n      <td>${index + 1}${medal}</td>\n      <td>${escapeHtml(entry.name)}</td>\n      <td>${entry.wpm}${warning}</td>\n      <td>${entry.accuracy}%</td>\n    `;\n    \n    if (entry.wpm > 200) {\n      row.style.background = 'rgba(230, 129, 97, 0.15)';\n    }\n    \n    organizerLeaderboard.appendChild(row);\n  });\n}\n\n// Utilities\nfunction showNotification(message, type = 'info') {\n  const notification = document.createElement('div');\n  notification.className = `notification notification-${type}`;\n  notification.textContent = message;\n  \n  document.body.appendChild(notification);\n  setTimeout(() => notification.classList.add('show'), 10);\n  setTimeout(() => {\n    notification.classList.remove('show');\n    setTimeout(() => notification.remove(), 300);\n  }, 4000);\n}\n\nfunction escapeHtml(unsafe) {\n  return unsafe\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&#039;\");\n}\n\n// Copy code button\ndocument.addEventListener('click', (e) => {\n  if (e.target.id === 'copy-code-btn' || e.target.closest('#copy-code-btn')) {\n    if (competitionCode) {\n      navigator.clipboard.writeText(competitionCode)\n        .then(() => showNotification('üìã Copied!', 'success'))\n        .catch(() => showNotification('Failed to copy', 'error'));\n    }\n  }\n});\n\n// Initialize\ndocument.addEventListener('DOMContentLoaded', () => {\n  console.log('üéØ Organizer loaded');\n  connectSocket();\n  \n  if (roundsContainer && roundsContainer.children.length === 0) {\n    initFirstRound();\n  }\n  \n  if (dashboardSection) {\n    dashboardSection.style.display = 'none';\n  }\n});\n\n// Prevent accidental close\nwindow.addEventListener('beforeunload', (e) => {\n  if (competitionId && currentRound < totalRounds) {\n    e.preventDefault();\n    e.returnValue = 'Competition running. Leave?';\n    return e.returnValue;\n  }\n});"},"level":"warn","message":"Validation errors in create competition:","service":"typing-competition","timestamp":"2025-11-02 22:37:16"}
{"level":"info","message":"Competition created: Duo Fight (RXBKMX)","service":"typing-competition","timestamp":"2025-11-02 22:37:39"}
{"level":"info","message":"Participant joined: __ORGANIZER__ in RXBKMX (total: 1)","service":"typing-competition","timestamp":"2025-11-02 22:37:39"}
{"level":"info","message":"Socket disconnected: iC7TiP1uxbtkTht8AAAB","service":"typing-competition","timestamp":"2025-11-02 22:44:09"}
{"level":"info","message":"Socket connected: KKorPdcLxbztLpUtAAAE, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:44:10"}
{"level":"info","message":"Competition created: TechFest 2025 (2FR4RH)","service":"typing-competition","timestamp":"2025-11-02 22:45:20"}
{"level":"info","message":"Participant joined: __ORGANIZER__ in 2FR4RH (total: 1)","service":"typing-competition","timestamp":"2025-11-02 22:45:20"}
{"level":"info","message":"Participant __ORGANIZER__ removed after timeout","service":"typing-competition","timestamp":"2025-11-02 22:46:09"}
{"level":"info","message":"üöÄ Server running on http://localhost:3000","service":"typing-competition","timestamp":"2025-11-02 22:54:04"}
{"level":"info","message":"Environment: development","service":"typing-competition","timestamp":"2025-11-02 22:54:04"}
{"level":"info","message":"‚úì MongoDB connected successfully","service":"typing-competition","timestamp":"2025-11-02 22:54:05"}
{"level":"info","message":"Socket connected: wP3FKCirfjUio837AAAB, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:54:05"}
{"level":"info","message":"Found 0 active competitions to recover","service":"typing-competition","timestamp":"2025-11-02 22:54:05"}
{"level":"info","message":"Socket disconnected: wP3FKCirfjUio837AAAB","service":"typing-competition","timestamp":"2025-11-02 22:54:11"}
{"level":"info","message":"Socket connected: wjwU9g97vmUC-eWdAAAE, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:54:14"}
{"level":"info","message":"Competition created: TechFest 2025 (FGKWF8)","service":"typing-competition","timestamp":"2025-11-02 22:54:34"}
{"level":"info","message":"Participant joined: __ORGANIZER__ in FGKWF8 (total: 1)","service":"typing-competition","timestamp":"2025-11-02 22:54:35"}
{"level":"info","message":"üöÄ Server running on http://localhost:3000","service":"typing-competition","timestamp":"2025-11-02 22:59:08"}
{"level":"info","message":"Environment: development","service":"typing-competition","timestamp":"2025-11-02 22:59:08"}
{"level":"info","message":"Socket connected: I8mcFkd0uqcp7g1aAAAB, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:59:09"}
{"level":"info","message":"‚úì MongoDB connected successfully","service":"typing-competition","timestamp":"2025-11-02 22:59:09"}
{"level":"info","message":"Found 0 active competitions to recover","service":"typing-competition","timestamp":"2025-11-02 22:59:09"}
{"level":"info","message":"Socket disconnected: I8mcFkd0uqcp7g1aAAAB","service":"typing-competition","timestamp":"2025-11-02 22:59:39"}
{"level":"info","message":"Socket connected: 87fbU8kwccd7hsyWAAAE, recovered: false","service":"typing-competition","timestamp":"2025-11-02 22:59:39"}
{"level":"info","message":"Competition created: TechFest 2025 (Q53QVQ)","service":"typing-competition","timestamp":"2025-11-02 23:00:01"}
{"level":"info","message":"Participant joined: __ORGANIZER__ in Q53QVQ (total: 1)","service":"typing-competition","timestamp":"2025-11-02 23:00:02"}
{"level":"info","message":"Socket connected: NiFskhUMOCNHLaFiAAAH, recovered: false","service":"typing-competition","timestamp":"2025-11-02 23:00:18"}
{"level":"info","message":"Socket disconnected: NiFskhUMOCNHLaFiAAAH","service":"typing-competition","timestamp":"2025-11-02 23:00:57"}
{"level":"info","message":"üöÄ Server running on http://localhost:3000","service":"typing-competition","timestamp":"2025-11-02 23:02:37"}
{"level":"info","message":"Environment: development","service":"typing-competition","timestamp":"2025-11-02 23:02:37"}
{"level":"info","message":"Socket connected: l09OzqaDgJ5E1MClAAAB, recovered: false","service":"typing-competition","timestamp":"2025-11-02 23:02:37"}
{"level":"info","message":"‚úì MongoDB connected successfully","service":"typing-competition","timestamp":"2025-11-02 23:02:38"}
{"level":"info","message":"Found 0 active competitions to recover","service":"typing-competition","timestamp":"2025-11-02 23:02:38"}
{"level":"info","message":"Socket disconnected: l09OzqaDgJ5E1MClAAAB","service":"typing-competition","timestamp":"2025-11-02 23:02:53"}
{"level":"info","message":"Socket connected: 63TrUVWe4SNxE_4QAAAE, recovered: false","service":"typing-competition","timestamp":"2025-11-02 23:02:53"}
{"level":"info","message":"Competition created: TechFest 2025 (49QQL)","service":"typing-competition","timestamp":"2025-11-02 23:03:05"}
{"level":"info","message":"Participant joined: __ORGANIZER__ in 49QQL (total: 1)","service":"typing-competition","timestamp":"2025-11-02 23:03:05"}
{"level":"info","message":"Socket disconnected: 63TrUVWe4SNxE_4QAAAE","service":"typing-competition","timestamp":"2025-11-02 23:03:51"}
